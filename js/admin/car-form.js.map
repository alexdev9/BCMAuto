{"version":3,"file":"car-form.js","sourceRoot":"","sources":["../../../src/admin/car-form.ts"],"names":[],"mappings":"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","sourcesContent":["import { Car } from '../types';\r\nimport { api } from '../mock-api';\r\n\r\nexport function setupCarForm(onCarAdded: () => void) {\r\n    const addCarForm = document.getElementById('addCarForm') as HTMLFormElement;\r\n    if (!addCarForm) return;\r\n\r\n    addCarForm.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData(addCarForm);\r\n        const imagesStr = formData.get('images') as string;\r\n        const images = imagesStr.split(',').map(url => url.trim());\r\n\r\n        // Split comma-separated equipment lists into arrays\r\n        const comfort = (formData.get('comfort') as string).split(',').map(item => item.trim());\r\n        const entertainment = (formData.get('entertainment') as string).split(',').map(item => item.trim());\r\n        const safety = (formData.get('safety') as string).split(',').map(item => item.trim());\r\n        const extras = (formData.get('extras') as string).split(',').map(item => item.trim());\r\n\r\n        const car: Omit<Car, 'id'> = {\r\n            make: formData.get('make') as string,\r\n            model: formData.get('model') as string,\r\n            year: parseInt(formData.get('year') as string),\r\n            price: parseInt(formData.get('price') as string),\r\n            images,\r\n            description: formData.get('description') as string,\r\n            mileage: parseInt(formData.get('mileage') as string),\r\n            transmission: formData.get('transmission') as 'automatic' | 'manual',\r\n            fuelType: formData.get('fuelType') as 'petrol' | 'diesel' | 'electric' | 'hybrid',\r\n\r\n            // Basic Data\r\n            bodyType: formData.get('bodyType') as string,\r\n            vehicleCondition: formData.get('vehicleCondition') as string,\r\n            driveType: formData.get('driveType') as string,\r\n            seats: parseInt(formData.get('seats') as string),\r\n            doors: parseInt(formData.get('doors') as string),\r\n            offerNumber: crypto.randomUUID(),\r\n\r\n            // Technical Data\r\n            power: {\r\n                kw: parseInt(formData.get('powerKw') as string),\r\n                hp: parseInt(formData.get('powerHp') as string)\r\n            },\r\n            engineSize: parseInt(formData.get('engineSize') as string),\r\n            gears: parseInt(formData.get('gears') as string),\r\n            cylinders: parseInt(formData.get('cylinders') as string),\r\n            weight: parseInt(formData.get('weight') as string),\r\n\r\n            // Environmental Data\r\n            emissionClass: formData.get('emissionClass') as string,\r\n            fuelConsumption: parseFloat(formData.get('fuelConsumption') as string),\r\n            co2Emissions: parseInt(formData.get('co2Emissions') as string),\r\n\r\n            // Equipment\r\n            comfort,\r\n            entertainment,\r\n            safety,\r\n            extras,\r\n\r\n            // Color and Interior\r\n            color: formData.get('color') as string,\r\n            specificColor: formData.get('specificColor') as string,\r\n            paintType: formData.get('paintType') as string,\r\n            interiorColor: formData.get('interiorColor') as string,\r\n            upholstery: formData.get('upholstery') as string\r\n        };\r\n\r\n        await api.addCar(car);\r\n        addCarForm.reset();\r\n        onCarAdded();\r\n    });\r\n}"]}